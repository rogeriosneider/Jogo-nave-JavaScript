<!doctype html>
<html>
    <script>
        class Nave{
            constructor(ctx, imagem){
                this.ctx = ctx;
                this.imagem = imagem;
                this.x = 0;
                this.y = 350;
                this.destinoX = 0;
            }

            apaga(){
                this.ctx.clearRect(this.x, this.y, 35, 44); 
                        //clearRect apaga a imagem na posição informada, no tamanho informado;
                        //35 e 44 são as dimenções de img da nave;
            }

            desenha(){
                this.ctx.drawImage(this.imagem, this.x, this.y);
            }

            move(){
                if(this.destinoX == this.x) return;
                this.apaga();
                if(this.destinoX > this.x) this.x += 2;
                else this.x -= 2;
                this.desenha();
            }

            posicao(x){
                this.destinoX = x + (x%2);
                    //o +(x%2) é pra quando o x for impar transforma em par pra parar de tremer.
            }
        }

        function posicao(event){
            nave.posicao(event.offsetX);
        }
        
        let nave;

        function executaCiclo(){
            nave.move();
        }
        
        function iniciar(){
            //alert("game iniciado");
            let canvas = document.getElementById("gameMap");
            let ctx = canvas.getContext("2d");
                //ctx é o "contexto" do canvas, pra poder ser manipulado, criando no formato 2d;

            let naveImg = document.getElementById("nave");
            let inimigo1Img = document.getElementById("inimigo1")
            let inimigo2Img = document.getElementById("inimigo2");
            let tiroImg = document.getElementById("tiro");

            /*ctx.drawImage(naveImg, 100, 150);
            ctx.drawImage(inimigo1Img, 200, 150);
                //desenha no contexto a imagem escolhida, nos eixos x.horizontal e y.vertical respectivamente;*/

            nave = new Nave(ctx, naveImg);

            intervalo = window.setInterval(executaCiclo,10);
                //10 é o intervalo de tempo medido em milissegundos; 100=1/10 e 1000=1s;
        }

    </script>
    <body onload="iniciar(); /*onload executa JS ao carregar body*/"> 
        <canvas id="gameMap" width="600" height="400" style="background-color: #ffffff; border: 1px solid #000000;"
        onmousemove="posicao(event)"></canvas>
        <img src="nave.png" id="nave">
        <img src="inimigo-fase1.png" id="inimigo1">
        <img src="inimigo-fase2.png" id="inimigo2">
        <img src="tiro.png" id="tiro">
    </body>
</html>